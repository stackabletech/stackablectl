stacks:
  monitoring:
    description: Stack containing Prometheus and Grafana
    stackableRelease: 23.1
    stackableOperators:
     - commons
    labels:
      - monitoring
      - prometheus
      - grafana
    manifests:
      - plainYaml: stacks/monitoring/grafana-dashboards.yaml
      - helmChart: stacks/_templates/prometheus.yaml
      - plainYaml: stacks/_templates/prometheus-service-monitor.yaml
    parameters:
      - name: grafanaAdminPassword
        description: Password of the Grafana admin user
        default: adminadmin
  logging:
    description: Stack containing OpenSearch, OpenSearch Dashboards (Kibana) and Vector aggregator
    stackableRelease: 23.1
    stackableOperators:
      - commons
      - secret
    labels:
      - logging
      - opensearch
      - opensearch-dashboards
      - vector
    manifests:
      - helmChart: stacks/_templates/opensearch.yaml
      - helmChart: stacks/_templates/opensearch-dashboards.yaml
      - helmChart: stacks/_templates/vector-aggregator.yaml
      - plainYaml: stacks/_templates/vector-aggregator-discovery.yaml
    parameters:
      - name: openSearchAdminPassword
        description: Password of the OpenSearch admin user
        default: adminadmin
      - name: openSearchDashboardPassword
        description: Password of OpenSearch Dashboard user
        default: kibanaserverkibanaserver
      - name: setSysctlMaxMapCount
        description: Wether an init-container should be used to increase 'sysctl -w vm.max_map_count'. This requires to spawn an init-container with runsAsUser 0 privileges, which some clusters prohibit. You can increase 'vm.max_map_count' on all of the kubernetes nodes manually and set this to 'false'.
        default: "true"
  airflow:
    description: Stack containing Airflow scheduling platform
    stackableRelease: 23.1
    stackableOperators:
      - commons
      - secret
      - airflow
      - spark-k8s # The airflow-scheduled-job demo does schedule a Spark job
    labels:
      - airflow
    manifests:
      - helmChart: stacks/_templates/postgresql-airflow.yaml
      - helmChart: stacks/_templates/redis-airflow.yaml
      - plainYaml: stacks/airflow/airflow.yaml
    # TODO: Parameterize
    parameters: []
  data-lakehouse-iceberg-trino-spark:
    description: Data lakehouse using Iceberg lakehouse on S3, Trino as query engine, Spark for streaming ingest and Superset for data visualization
    stackableRelease: 23.1
    stackableOperators:
      - commons
      - secret
      - hive
      - trino
      - zookeeper
      - kafka
      - nifi
      - superset
      - spark-k8s
    labels:
      - iceberg
      - trino
      - spark
      - superset
      - kafka
      - nifi
      - minio
      - s3
    manifests:
      - helmChart: stacks/_templates/minio-distributed.yaml
      - helmChart: stacks/_templates/postgresql-hive.yaml
      - helmChart: stacks/_templates/postgresql-hive-iceberg.yaml
      - helmChart: stacks/_templates/postgresql-superset.yaml
      - plainYaml: stacks/data-lakehouse-iceberg-trino-spark/hive-metastores.yaml
      - plainYaml: stacks/data-lakehouse-iceberg-trino-spark/trino.yaml
      - plainYaml: stacks/data-lakehouse-iceberg-trino-spark/zookeeper.yaml
      - plainYaml: stacks/data-lakehouse-iceberg-trino-spark/kafka.yaml
      - plainYaml: stacks/data-lakehouse-iceberg-trino-spark/nifi.yaml
      - plainYaml: stacks/kafka-druid-superset-s3/superset.yaml # Reuse
    # TODO: Parameterize
    parameters: []
  hdfs-hbase:
    description: HBase cluster using HDFS as underlying storage
    stackableRelease: 23.1
    stackableOperators:
      - commons
      - secret
      - zookeeper
      - hdfs
      - hbase
    labels:
      - hbase
      - hdfs
    manifests:
      - plainYaml: stacks/hdfs-hbase/zookeeper.yaml
      - plainYaml: stacks/hdfs-hbase/hdfs.yaml
      - plainYaml: stacks/hdfs-hbase/hbase.yaml
    # TODO: Parameterize
    parameters: []
